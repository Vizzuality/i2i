!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.vegaTooltip=t()}}(function(){var t;return function t(e,n,r){function i(u,a){if(!n[u]){if(!e[u]){var c="function"==typeof require&&require;if(!a&&c)return c(u,!0);if(o)return o(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var f=n[u]={exports:{}};e[u][0].call(f.exports,function(t){var n=e[u][1][t];return i(n||t)},f,f.exports,t,e,n,r)}return n[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(e,n,r){!function(e,i){"object"==typeof r&&void 0!==n?i(r):"function"==typeof t&&t.amd?t(["exports"],i):i(e.d3=e.d3||{})}(this,function(t){"use strict";function e(){}function n(t,n){var r=new e;if(t instanceof e)t.each(function(t,e){r.set(e,t)});else if(Array.isArray(t)){var i,o=-1,u=t.length;if(null==n)for(;++o<u;)r.set(o,t[o]);else for(;++o<u;)r.set(n(i=t[o],o,t),i)}else if(t)for(var a in t)r.set(a,t[a]);return r}function r(){return{}}function i(t,e,n){t[e]=n}function o(){return n()}function u(t,e,n){t.set(e,n)}function a(){}function c(t,e){var n=new a;if(t instanceof a)t.each(function(t){n.add(t)});else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}e.prototype=n.prototype={constructor:e,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var s=function(){function t(e,r,i,o){if(r>=f.length)return null!=c?c(e):null!=a?e.sort(a):e;for(var u,s,l,h=-1,d=e.length,p=f[r++],m=n(),v=i();++h<d;)(l=m.get(u=p(s=e[h])+""))?l.push(s):m.set(u,[s]);return m.each(function(e,n){o(v,n,t(e,r,i,o))}),v}function e(t,n){if(++n>f.length)return t;var r,i=l[n-1];return null!=c&&n>=f.length?r=t.entries():(r=[],t.each(function(t,i){r.push({key:i,values:e(t,n)})})),null!=i?r.sort(function(t,e){return i(t.key,e.key)}):r}var a,c,s,f=[],l=[];return s={object:function(e){return t(e,0,r,i)},map:function(e){return t(e,0,o,u)},entries:function(n){return e(t(n,0,o,u),0)},key:function(t){return f.push(t),s},sortKeys:function(t){return l[f.length-1]=t,s},sortValues:function(t){return a=t,s},rollup:function(t){return c=t,s}}},f=n.prototype;a.prototype=c.prototype={constructor:a,has:f.has,add:function(t){return t+="",this["$"+t]=t,this},remove:f.remove,clear:f.clear,values:f.keys,size:f.size,empty:f.empty,each:f.each};var l=function(t){var e=[];for(var n in t)e.push(n);return e},h=function(t){var e=[];for(var n in t)e.push(t[n]);return e},d=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e};t.nest=s,t.set=c,t.map=n,t.keys=l,t.values=h,t.entries=d,Object.defineProperty(t,"__esModule",{value:!0})})},{}],2:[function(e,n,r){!function(e,i){"object"==typeof r&&void 0!==n?i(r):"function"==typeof t&&t.amd?t(["exports"],i):i(e.d3=e.d3||{})}(this,function(t){"use strict";function e(t){return new n(t)}function n(t){if(!(e=d.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",r=e[2]||">",i=e[3]||"-",o=e[4]||"",u=!!e[5],a=e[6]&&+e[6],c=!!e[7],s=e[8]&&+e[8].slice(1),f=e[9]||"";"n"===f?(c=!0,f="g"):h[f]||(f=""),(u||"0"===n&&"="===r)&&(u=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=o,this.zero=u,this.width=a,this.comma=c,this.precision=s,this.type=f}function r(e){return p=g(e),t.format=p.format,t.formatPrefix=p.formatPrefix,p}var i,o=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},u=function(t){return t=o(Math.abs(t)),t?t[1]:NaN},a=function(t,e){return function(n,r){for(var i=n.length,o=[],u=0,a=t[0],c=0;i>0&&a>0&&(c+a+1>r&&(a=Math.max(1,r-c)),o.push(n.substring(i-=a,i+a)),!((c+=a+1)>r));)a=t[u=(u+1)%t.length];return o.reverse().join(e)}},c=function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}},s=function(t,e){t=t.toPrecision(e);t:for(var n,r=t.length,i=1,o=-1;i<r;++i)switch(t[i]){case".":o=n=i;break;case"0":0===o&&(o=i),n=i;break;case"e":break t;default:o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(n+1):t},f=function(t,e){var n=o(t,e);if(!n)return t+"";var r=n[0],u=n[1],a=u-(i=3*Math.max(-8,Math.min(8,Math.floor(u/3))))+1,c=r.length;return a===c?r:a>c?r+new Array(a-c+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+o(t,Math.max(0,e+a-1))[0]},l=function(t,e){var n=o(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},h={"":s,"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return l(100*t,e)},r:l,s:f,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},d=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;e.prototype=n.prototype,n.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var p,m=function(t){return t},v=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"],g=function(t){function n(t){function n(t){var e,n,c,s=w,h=T;if("c"===_)h=M(t)+h,t="";else{t=+t;var d=t<0;if(t=M(Math.abs(t),y),d&&0==+t&&(d=!1),s=(d?"("===a?a:"-":"-"===a||"("===a?"":a)+s,h=h+("s"===_?v[8+i/3]:"")+(d&&"("===a?")":""),x)for(e=-1,n=t.length;++e<n;)if(48>(c=t.charCodeAt(e))||c>57){h=(46===c?f+t.slice(e+1):t.slice(e))+h,t=t.slice(0,e);break}}g&&!p&&(t=o(t,1/0));var D=s.length+t.length+h.length,b=D<m?new Array(m-D+1).join(r):"";switch(g&&p&&(t=o(b+t,b.length?m-h.length:1/0),b=""),u){case"<":t=s+t+h+b;break;case"=":t=s+b+t+h;break;case"^":t=b.slice(0,D=b.length>>1)+s+t+h+b.slice(D);break;default:t=b+s+t+h}return l(t)}t=e(t);var r=t.fill,u=t.align,a=t.sign,c=t.symbol,p=t.zero,m=t.width,g=t.comma,y=t.precision,_=t.type,w="$"===c?s[0]:"#"===c&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",T="$"===c?s[1]:/[%p]/.test(_)?d:"",M=h[_],x=!_||/[defgprs%]/.test(_);return y=null==y?_?6:12:/[gprs]/.test(_)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),n.toString=function(){return t+""},n}function r(t,r){var i=n((t=e(t),t.type="f",t)),o=3*Math.max(-8,Math.min(8,Math.floor(u(r)/3))),a=Math.pow(10,-o),c=v[8+o/3];return function(t){return i(a*t)+c}}var o=t.grouping&&t.thousands?a(t.grouping,t.thousands):m,s=t.currency,f=t.decimal,l=t.numerals?c(t.numerals):m,d=t.percent||"%";return{format:n,formatPrefix:r}};r({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var y=function(t){return Math.max(0,-u(Math.abs(t)))},_=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(u(e)/3)))-u(Math.abs(t)))},w=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,u(e)-u(t))+1};t.formatDefaultLocale=r,t.formatLocale=g,t.formatSpecifier=e,t.precisionFixed=y,t.precisionPrefix=_,t.precisionRound=w,Object.defineProperty(t,"__esModule",{value:!0})})},{}],3:[function(e,n,r){!function(e,i){"object"==typeof r&&void 0!==n?i(r):"function"==typeof t&&t.amd?t(["exports"],i):i(e.d3=e.d3||{})}(this,function(t){"use strict";function e(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Q&&e.documentElement.namespaceURI===Q?e.createElement(t):e.createElementNS(n,t)}}function n(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function r(){return new i}function i(){this._="@"+(++nt).toString(36)}function o(t,e,n){return t=u(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function u(e,n,r){return function(i){var o=t.event;t.event=i;try{e.call(this,this.__data__,n,r)}finally{t.event=o}}}function a(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}function c(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function s(t,e,n){var r=at.hasOwnProperty(t.type)?o:u;return function(i,o,u){var a,c=this.__on,s=r(e,o,u);if(c)for(var f=0,l=c.length;f<l;++f)if((a=c[f]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=s,a.capture=n),void(a.value=e);this.addEventListener(t.type,s,n),a={type:t.type,name:t.name,value:e,listener:s,capture:n},c?c.push(a):this.__on=[a]}}function f(e,n,r,i){var o=t.event;e.sourceEvent=t.event,t.event=e;try{return n.apply(r,i)}finally{t.event=o}}function l(){}function h(){return[]}function d(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function p(t,e,n,r,i,o){for(var u,a=0,c=e.length,s=o.length;a<s;++a)(u=e[a])?(u.__data__=o[a],r[a]=u):n[a]=new d(t,o[a]);for(;a<c;++a)(u=e[a])&&(i[a]=u)}function m(t,e,n,r,i,o,u){var a,c,s,f={},l=e.length,h=o.length,p=new Array(l);for(a=0;a<l;++a)(c=e[a])&&(p[a]=s=wt+u.call(c,c.__data__,a,e),s in f?i[a]=c:f[s]=c);for(a=0;a<h;++a)s=wt+u.call(t,o[a],a,o),(c=f[s])?(r[a]=c,c.__data__=o[a],f[s]=null):n[a]=new d(t,o[a]);for(a=0;a<l;++a)(c=e[a])&&f[p[a]]===c&&(i[a]=c)}function v(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function g(t){return function(){this.removeAttribute(t)}}function y(t){return function(){this.removeAttributeNS(t.space,t.local)}}function _(t,e){return function(){this.setAttribute(t,e)}}function w(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function T(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function M(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function x(t){return function(){this.style.removeProperty(t)}}function D(t,e,n){return function(){this.style.setProperty(t,e,n)}}function b(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function A(t){return function(){delete this[t]}}function C(t,e){return function(){this[t]=e}}function F(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function S(t){return t.trim().split(/^|\s+/)}function U(t){return t.classList||new L(t)}function L(t){this._node=t,this._names=S(t.getAttribute("class")||"")}function E(t,e){for(var n=U(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function O(t,e){for(var n=U(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Y(t){return function(){E(this,t)}}function P(t){return function(){O(this,t)}}function H(t,e){return function(){(e.apply(this,arguments)?E:O)(this,t)}}function N(){this.textContent=""}function k(t){return function(){this.textContent=t}}function I(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function j(){this.innerHTML=""}function R(t){return function(){this.innerHTML=t}}function W(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function $(){this.nextSibling&&this.parentNode.appendChild(this)}function z(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function q(){return null}function B(){var t=this.parentNode;t&&t.removeChild(this)}function V(t,e,n){var r=Ot(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function X(t,e){return function(){return V(this,t,e)}}function Z(t,e){return function(){return V(this,t,e.apply(this,arguments))}}function J(t,e){this._groups=t,this._parents=e}function G(){return new J([[document.documentElement]],Bt)}var Q="http://www.w3.org/1999/xhtml",K={svg:"http://www.w3.org/2000/svg",xhtml:Q,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},tt=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),K.hasOwnProperty(e)?{space:K[e],local:t}:t},et=function(t){var r=tt(t);return(r.local?n:e)(r)},nt=0;i.prototype=r.prototype={constructor:i,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var rt=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var it=document.documentElement;if(!it.matches){var ot=it.webkitMatchesSelector||it.msMatchesSelector||it.mozMatchesSelector||it.oMatchesSelector;rt=function(t){return function(){return ot.call(this,t)}}}}var ut=rt,at={};if(t.event=null,"undefined"!=typeof document){"onmouseenter"in document.documentElement||(at={mouseenter:"mouseover",mouseleave:"mouseout"})}var ct=function(t,e,n){var r,i,o=a(t+""),u=o.length;{if(!(arguments.length<2)){for(f=e?s:c,null==n&&(n=!1),r=0;r<u;++r)this.each(f(o[r],e,n));return this}var f=this.node().__on;if(f)for(var l,h=0,d=f.length;h<d;++h)for(r=0,l=f[h];r<u;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value}},st=function(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n},ft=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]},lt=function(t){var e=st();return e.changedTouches&&(e=e.changedTouches[0]),ft(t,e)},ht=function(t){return null==t?l:function(){return this.querySelector(t)}},dt=function(t){"function"!=typeof t&&(t=ht(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,u,a=e[i],c=a.length,s=r[i]=new Array(c),f=0;f<c;++f)(o=a[f])&&(u=t.call(o,o.__data__,f,a))&&("__data__"in o&&(u.__data__=o.__data__),s[f]=u);return new J(r,this._parents)},pt=function(t){return null==t?h:function(){return this.querySelectorAll(t)}},mt=function(t){"function"!=typeof t&&(t=pt(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var u,a=e[o],c=a.length,s=0;s<c;++s)(u=a[s])&&(r.push(t.call(u,u.__data__,s,a)),i.push(u));return new J(r,i)},vt=function(t){"function"!=typeof t&&(t=ut(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,u=e[i],a=u.length,c=r[i]=[],s=0;s<a;++s)(o=u[s])&&t.call(o,o.__data__,s,u)&&c.push(o);return new J(r,this._parents)},gt=function(t){return new Array(t.length)},yt=function(){return new J(this._enter||this._groups.map(gt),this._parents)};d.prototype={constructor:d,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var _t=function(t){return function(){return t}},wt="$",Tt=function(t,e){if(!t)return d=new Array(this.size()),s=-1,this.each(function(t){d[++s]=t}),d;var n=e?m:p,r=this._parents,i=this._groups;"function"!=typeof t&&(t=_t(t));for(var o=i.length,u=new Array(o),a=new Array(o),c=new Array(o),s=0;s<o;++s){var f=r[s],l=i[s],h=l.length,d=t.call(f,f&&f.__data__,s,r),v=d.length,g=a[s]=new Array(v),y=u[s]=new Array(v);n(f,l,g,y,c[s]=new Array(h),d,e);for(var _,w,T=0,M=0;T<v;++T)if(_=g[T]){for(T>=M&&(M=T+1);!(w=y[M])&&++M<v;);_._next=w||null}}return u=new J(u,r),u._enter=a,u._exit=c,u},Mt=function(){return new J(this._exit||this._groups.map(gt),this._parents)},xt=function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),u=new Array(r),a=0;a<o;++a)for(var c,s=e[a],f=n[a],l=s.length,h=u[a]=new Array(l),d=0;d<l;++d)(c=s[d]||f[d])&&(h[d]=c);for(;a<r;++a)u[a]=e[a];return new J(u,this._parents)},Dt=function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,u=i[o];--o>=0;)(r=i[o])&&(u&&u!==r.nextSibling&&u.parentNode.insertBefore(r,u),u=r);return this},bt=function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=v);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var u,a=n[o],c=a.length,s=i[o]=new Array(c),f=0;f<c;++f)(u=a[f])&&(s[f]=u);s.sort(e)}return new J(i,this._parents).order()},At=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},Ct=function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},Ft=function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var u=r[i];if(u)return u}return null},St=function(){var t=0;return this.each(function(){++t}),t},Ut=function(){return!this.node()},Lt=function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],u=0,a=o.length;u<a;++u)(i=o[u])&&t.call(i,i.__data__,u,o);return this},Et=function(t,e){var n=tt(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?y:g:"function"==typeof e?n.local?M:T:n.local?w:_)(n,e))},Ot=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView},Yt=function(t,e,n){var r;return arguments.length>1?this.each((null==e?x:"function"==typeof e?b:D)(t,e,null==n?"":n)):Ot(r=this.node()).getComputedStyle(r,null).getPropertyValue(t)},Pt=function(t,e){return arguments.length>1?this.each((null==e?A:"function"==typeof e?F:C)(t,e)):this.node()[t]};L.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Ht=function(t,e){var n=S(t+"");if(arguments.length<2){for(var r=U(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?H:e?Y:P)(n,e))},Nt=function(t){return arguments.length?this.each(null==t?N:("function"==typeof t?I:k)(t)):this.node().textContent},kt=function(t){return arguments.length?this.each(null==t?j:("function"==typeof t?W:R)(t)):this.node().innerHTML},It=function(){return this.each($)},jt=function(){return this.each(z)},Rt=function(t){var e="function"==typeof t?t:et(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},Wt=function(t,e){var n="function"==typeof t?t:et(t),r=null==e?q:"function"==typeof e?e:ht(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},$t=function(){return this.each(B)},zt=function(t){return arguments.length?this.property("__data__",t):this.node().__data__},qt=function(t,e){return this.each(("function"==typeof e?Z:X)(t,e))},Bt=[null];J.prototype=G.prototype={constructor:J,select:dt,selectAll:mt,filter:vt,data:Tt,enter:yt,exit:Mt,merge:xt,order:Dt,sort:bt,call:At,nodes:Ct,node:Ft,size:St,empty:Ut,each:Lt,attr:Et,style:Yt,property:Pt,classed:Ht,text:Nt,html:kt,raise:It,lower:jt,append:Rt,insert:Wt,remove:$t,datum:zt,on:ct,dispatch:qt};var Vt=function(t){return"string"==typeof t?new J([[document.querySelector(t)]],[document.documentElement]):new J([[t]],Bt)},Xt=function(t){return"string"==typeof t?new J([document.querySelectorAll(t)],[document.documentElement]):new J([null==t?[]:t],Bt)},Zt=function(t,e,n){arguments.length<3&&(n=e,e=st().changedTouches);for(var r,i=0,o=e?e.length:0;i<o;++i)if((r=e[i]).identifier===n)return ft(t,r);return null},Jt=function(t,e){null==e&&(e=st().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=ft(t,e[n]);return i};t.creator=et,t.local=r,t.matcher=ut,t.mouse=lt,t.namespace=tt,t.namespaces=K,t.select=Vt,t.selectAll=Xt,t.selection=G,t.selector=ht,t.selectorAll=pt,t.touch=Zt,t.touches=Jt,t.window=Ot,t.customEvent=f,Object.defineProperty(t,"__esModule",{value:!0})})},{}],4:[function(e,n,r){!function(i,o){"object"==typeof r&&void 0!==n?o(r,e("d3-time")):"function"==typeof t&&t.amd?t(["exports","d3-time"],o):o(i.d3=i.d3||{},i.d3)}(this,function(t,e){"use strict";function n(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function r(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function i(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function o(t){function e(t,e){return function(n){var r,i,o,u=[],a=-1,c=0,s=t.length;for(n instanceof Date||(n=new Date(+n));++a<s;)37===t.charCodeAt(a)&&(u.push(t.slice(c,a)),null!=(i=rt[r=t.charAt(++a)])?r=t.charAt(++a):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),u.push(r),c=a+1);return u.push(t.slice(c,a)),u.join("")}}function o(t,e){return function(n){var o=i(1900);if(u(o,t,n+="",0)!=n.length)return null;if("p"in o&&(o.H=o.H%12+12*o.p),"W"in o||"U"in o){"w"in o||(o.w="W"in o?1:0);var a="Z"in o?r(i(o.y)).getUTCDay():e(i(o.y)).getDay();o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(a+5)%7:o.w+7*o.U-(a+6)%7}return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,r(o)):e(o)}}function u(t,e,n,r){for(var i,o,u=0,a=e.length,c=n.length;u<a;){if(r>=c)return-1;if(37===(i=e.charCodeAt(u++))){if(i=e.charAt(u++),!(o=Nt[i in rt?e.charAt(u++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function a(t,e,n){var r=bt.exec(e.slice(n));return r?(t.p=At[r[0].toLowerCase()],n+r[0].length):-1}function K(t,e,n){var r=St.exec(e.slice(n));return r?(t.w=Ut[r[0].toLowerCase()],n+r[0].length):-1}function tt(t,e,n){var r=Ct.exec(e.slice(n));return r?(t.w=Ft[r[0].toLowerCase()],n+r[0].length):-1}function et(t,e,n){var r=Ot.exec(e.slice(n));return r?(t.m=Yt[r[0].toLowerCase()],n+r[0].length):-1}function nt(t,e,n){var r=Lt.exec(e.slice(n));return r?(t.m=Et[r[0].toLowerCase()],n+r[0].length):-1}function it(t,e,n){return u(t,gt,e,n)}function ot(t,e,n){return u(t,yt,e,n)}function ut(t,e,n){return u(t,_t,e,n)}function at(t){return Mt[t.getDay()]}function ct(t){return Tt[t.getDay()]}function st(t){return Dt[t.getMonth()]}function ft(t){return xt[t.getMonth()]}function lt(t){return wt[+(t.getHours()>=12)]}function ht(t){return Mt[t.getUTCDay()]}function dt(t){return Tt[t.getUTCDay()]}function pt(t){return Dt[t.getUTCMonth()]}function mt(t){return xt[t.getUTCMonth()]}function vt(t){return wt[+(t.getUTCHours()>=12)]}var gt=t.dateTime,yt=t.date,_t=t.time,wt=t.periods,Tt=t.days,Mt=t.shortDays,xt=t.months,Dt=t.shortMonths,bt=c(wt),At=s(wt),Ct=c(Tt),Ft=s(Tt),St=c(Mt),Ut=s(Mt),Lt=c(xt),Et=s(xt),Ot=c(Dt),Yt=s(Dt),Pt={a:at,A:ct,b:st,B:ft,c:null,d:D,e:D,H:b,I:A,j:C,L:F,m:S,M:U,p:lt,S:L,U:E,w:O,W:Y,x:null,X:null,y:P,Y:H,Z:N,"%":Q},Ht={a:ht,A:dt,b:pt,B:mt,c:null,d:k,e:k,H:I,I:j,j:R,L:W,m:$,M:z,p:vt,S:q,U:B,w:V,W:X,x:null,X:null,y:Z,Y:J,Z:G,"%":Q},Nt={a:K,A:tt,b:et,B:nt,c:it,d:g,e:g,H:_,I:_,j:y,L:M,m:v,M:w,p:a,S:T,U:l,w:f,W:h,x:ot,X:ut,y:p,Y:d,Z:m,"%":x};return Pt.x=e(yt,Pt),Pt.X=e(_t,Pt),Pt.c=e(gt,Pt),Ht.x=e(yt,Ht),Ht.X=e(_t,Ht),Ht.c=e(gt,Ht),{format:function(t){var n=e(t+="",Pt);return n.toString=function(){return t},n},parse:function(t){var e=o(t+="",n);return e.toString=function(){return t},e},utcFormat:function(t){var n=e(t+="",Ht);return n.toString=function(){return t},n},utcParse:function(t){var e=o(t,r);return e.toString=function(){return t},e}}}function u(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function a(t){return t.replace(ut,"\\$&")}function c(t){return new RegExp("^(?:"+t.map(a).join("|")+")","i")}function s(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function f(t,e,n){var r=it.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function l(t,e,n){var r=it.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function h(t,e,n){var r=it.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function d(t,e,n){var r=it.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function p(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function m(t,e,n){var r=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function v(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function g(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function y(t,e,n){var r=it.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function _(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function w(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function T(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function M(t,e,n){var r=it.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function x(t,e,n){var r=ot.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function D(t,e){return u(t.getDate(),e,2)}function b(t,e){return u(t.getHours(),e,2)}function A(t,e){return u(t.getHours()%12||12,e,2)}function C(t,n){return u(1+e.timeDay.count(e.timeYear(t),t),n,3)}function F(t,e){return u(t.getMilliseconds(),e,3)}function S(t,e){return u(t.getMonth()+1,e,2)}function U(t,e){return u(t.getMinutes(),e,2)}function L(t,e){return u(t.getSeconds(),e,2)}function E(t,n){return u(e.timeSunday.count(e.timeYear(t),t),n,2)}function O(t){return t.getDay()}function Y(t,n){return u(e.timeMonday.count(e.timeYear(t),t),n,2)}function P(t,e){return u(t.getFullYear()%100,e,2)}function H(t,e){return u(t.getFullYear()%1e4,e,4)}function N(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+u(e/60|0,"0",2)+u(e%60,"0",2)}function k(t,e){return u(t.getUTCDate(),e,2)}function I(t,e){return u(t.getUTCHours(),e,2)}function j(t,e){return u(t.getUTCHours()%12||12,e,2)}function R(t,n){return u(1+e.utcDay.count(e.utcYear(t),t),n,3)}function W(t,e){return u(t.getUTCMilliseconds(),e,3)}function $(t,e){return u(t.getUTCMonth()+1,e,2)}function z(t,e){return u(t.getUTCMinutes(),e,2)}function q(t,e){return u(t.getUTCSeconds(),e,2)}function B(t,n){return u(e.utcSunday.count(e.utcYear(t),t),n,2)}function V(t){return t.getUTCDay()}function X(t,n){return u(e.utcMonday.count(e.utcYear(t),t),n,2)}function Z(t,e){return u(t.getUTCFullYear()%100,e,2)}function J(t,e){return u(t.getUTCFullYear()%1e4,e,4)}function G(){return"+0000"}function Q(){return"%"}function K(e){return nt=o(e),t.timeFormat=nt.format,t.timeParse=nt.parse,t.utcFormat=nt.utcFormat,t.utcParse=nt.utcParse,nt}function tt(t){return t.toISOString()}function et(t){var e=new Date(t);return isNaN(e)?null:e}var nt,rt={"-":"",_:" ",0:"0"},it=/^\s*\d+/,ot=/^%/,ut=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;K({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var at=Date.prototype.toISOString?tt:t.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),ct=+new Date("2000-01-01T00:00:00.000Z")?et:t.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");t.timeFormatDefaultLocale=K,t.timeFormatLocale=o,t.isoFormat=at,t.isoParse=ct,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-time":5}],5:[function(e,n,r){!function(e,i){"object"==typeof r&&void 0!==n?i(r):"function"==typeof t&&t.amd?t(["exports"],i):i(e.d3=e.d3||{})}(this,function(t){"use strict";function e(t,n,r,u){function a(e){return t(e=new Date(+e)),e}return a.floor=a,a.ceil=function(e){return t(e=new Date(e-1)),n(e,1),t(e),e},a.round=function(t){var e=a(t),n=a.ceil(t);return t-e<n-t?e:n},a.offset=function(t,e){return n(t=new Date(+t),null==e?1:Math.floor(e)),t},a.range=function(e,r,i){var o=[];if(e=a.ceil(e),i=null==i?1:Math.floor(i),!(e<r&&i>0))return o;do{o.push(new Date(+e))}while(n(e,i),t(e),e<r);return o},a.filter=function(r){return e(function(e){if(e>=e)for(;t(e),!r(e);)e.setTime(e-1)},function(t,e){if(t>=t)for(;--e>=0;)for(;n(t,1),!r(t););})},r&&(a.count=function(e,n){return i.setTime(+e),o.setTime(+n),t(i),t(o),Math.floor(r(i,o))},a.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?a.filter(u?function(e){return u(e)%t==0}:function(e){return a.count(0,e)%t==0}):a:null}),a}function n(t){return e(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*c)/s})}function r(t){return e(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/s})}var i=new Date,o=new Date,u=e(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});u.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?e(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):u:null};var a=u.range,c=6e4,s=6048e5,f=e(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),l=f.range,h=e(function(t){t.setTime(Math.floor(t/c)*c)},function(t,e){t.setTime(+t+e*c)},function(t,e){return(e-t)/c},function(t){return t.getMinutes()}),d=h.range,p=e(function(t){var e=t.getTimezoneOffset()*c%36e5;e<0&&(e+=36e5),t.setTime(36e5*Math.floor((+t-e)/36e5)+e)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),m=p.range,v=e(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*c)/864e5},function(t){return t.getDate()-1}),g=v.range,y=n(0),_=n(1),w=n(2),T=n(3),M=n(4),x=n(5),D=n(6),b=y.range,A=_.range,C=w.range,F=T.range,S=M.range,U=x.range,L=D.range,E=e(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),O=E.range,Y=e(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Y.every=function(t){return isFinite(t=Math.floor(t))&&t>0?e(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var P=Y.range,H=e(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*c)},function(t,e){return(e-t)/c},function(t){return t.getUTCMinutes()}),N=H.range,k=e(function(t){t.setUTCMinutes(0,0,0)},function(t,e){
t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()}),I=k.range,j=e(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1}),R=j.range,W=r(0),$=r(1),z=r(2),q=r(3),B=r(4),V=r(5),X=r(6),Z=W.range,J=$.range,G=z.range,Q=q.range,K=B.range,tt=V.range,et=X.range,nt=e(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),rt=nt.range,it=e(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});it.every=function(t){return isFinite(t=Math.floor(t))&&t>0?e(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var ot=it.range;t.timeInterval=e,t.timeMillisecond=u,t.timeMilliseconds=a,t.utcMillisecond=u,t.utcMilliseconds=a,t.timeSecond=f,t.timeSeconds=l,t.utcSecond=f,t.utcSeconds=l,t.timeMinute=h,t.timeMinutes=d,t.timeHour=p,t.timeHours=m,t.timeDay=v,t.timeDays=g,t.timeWeek=y,t.timeWeeks=b,t.timeSunday=y,t.timeSundays=b,t.timeMonday=_,t.timeMondays=A,t.timeTuesday=w,t.timeTuesdays=C,t.timeWednesday=T,t.timeWednesdays=F,t.timeThursday=M,t.timeThursdays=S,t.timeFriday=x,t.timeFridays=U,t.timeSaturday=D,t.timeSaturdays=L,t.timeMonth=E,t.timeMonths=O,t.timeYear=Y,t.timeYears=P,t.utcMinute=H,t.utcMinutes=N,t.utcHour=k,t.utcHours=I,t.utcDay=j,t.utcDays=R,t.utcWeek=W,t.utcWeeks=Z,t.utcSunday=W,t.utcSundays=Z,t.utcMonday=$,t.utcMondays=J,t.utcTuesday=z,t.utcTuesdays=G,t.utcWednesday=q,t.utcWednesdays=Q,t.utcThursday=B,t.utcThursdays=K,t.utcFriday=V,t.utcFridays=tt,t.utcSaturday=X,t.utcSaturdays=et,t.utcMonth=nt,t.utcMonths=rt,t.utcYear=it,t.utcYears=ot,Object.defineProperty(t,"__esModule",{value:!0})})},{}],6:[function(t,e,n){"use strict";function r(t){if(t)switch(t=t.toLowerCase()){case"q":case n.QUANTITATIVE:return"quantitative";case"t":case n.TEMPORAL:return"temporal";case"o":case n.ORDINAL:return"ordinal";case"n":case n.NOMINAL:return"nominal"}}Object.defineProperty(n,"__esModule",{value:!0});var i;!function(t){t.QUANTITATIVE="quantitative",t.ORDINAL="ordinal",t.TEMPORAL="temporal",t.NOMINAL="nominal"}(i=n.Type||(n.Type={})),n.QUANTITATIVE=i.QUANTITATIVE,n.ORDINAL=i.ORDINAL,n.TEMPORAL=i.TEMPORAL,n.NOMINAL=i.NOMINAL,n.getFullName=r},{}],7:[function(t,e,n){"use strict";function r(t,e,n){if(void 0!==t&&null!==t&&e)switch(e){case"time":return n?s.timeFormat(n)(t):u(t);case"number":return n?a.format(n)(t):o(t);case"string":default:return t}}function i(t){return"number"==typeof t?o(t):t instanceof Date?u(t):t}function o(t){return t%1==0?a.format(",")(t):a.format(",.2f")(t)}function u(t){var e=s.timeFormat(".%L"),n=s.timeFormat(":%S"),r=s.timeFormat("%I:%M"),i=s.timeFormat("%I %p"),o=s.timeFormat("%a %d"),u=s.timeFormat("%b %d"),a=s.timeFormat("%B"),f=s.timeFormat("%Y");return(c.timeSecond(t)<t?e:c.timeMinute(t)<t?n:c.timeHour(t)<t?r:c.timeDay(t)<t?i:c.timeMonth(t)<t?c.timeWeek(t)<t?o:u:c.timeYear(t)<t?a:f)(t)}Object.defineProperty(n,"__esModule",{value:!0});var a=t("d3-format"),c=t("d3-time"),s=t("d3-time-format");n.customFormat=r,n.autoFormat=i,n.autoNumberFormat=o,n.autoTimeFormat=u},{"d3-format":2,"d3-time":5,"d3-time-format":4}],8:[function(t,e,n){"use strict";function r(t,e){return void 0===e&&(e={showAllFields:!0}),t.addEventListener("mouseover.tooltipInit",function(t,n){s(n)&&(o(),m=window.setTimeout(function(){u(t,n,e)},e.delay||l.DELAY))}),t.addEventListener("mousemove.tooltipUpdate",function(t,n){s(n)&&v&&a(t,n,e)}),t.addEventListener("mouseout.tooltipRemove",function(t,n){s(n)&&(o(),v&&c(t,n,e))}),{destroy:function(){t.removeEventListener("mouseover.tooltipInit"),t.removeEventListener("mousemove.tooltipUpdate"),t.removeEventListener("mouseout.tooltipRemove"),o()}}}function i(t,e,n){return void 0===n&&(n={}),n=d.supplementOptions(n,e),t.addEventListener("mouseover.tooltipInit",function(t,e){s(e)&&(o(),m=window.setTimeout(function(){u(t,e,n)},n.delay||l.DELAY))}),t.addEventListener("mousemove.tooltipUpdate",function(t,e){s(e)&&v&&a(t,e,n)}),t.addEventListener("mouseout.tooltipRemove",function(t,e){s(e)&&(o(),v&&c(t,e,n))}),{destroy:function(){t.removeEventListener("mouseover.tooltipInit"),t.removeEventListener("mousemove.tooltipUpdate"),t.removeEventListener("mouseout.tooltipRemove"),o()}}}function o(){m&&(window.clearTimeout(m),m=void 0)}function u(t,e,n){var r=p.getTooltipPlaceholder(),i=h.getTooltipData(e,n);i&&0!==i.length&&(p.bindData(r,i),p.updatePosition(t,n),p.updateColorTheme(n),f.select("#vis-tooltip").style("visibility","visible"),v=!0,n.onAppear&&n.onAppear(t,e))}function a(t,e,n){p.updatePosition(t,n),n.onMove&&n.onMove(t,e)}function c(t,e,n){f.select("#vis-tooltip").style("visibility","hidden"),v=!1,p.clearData(),p.clearColorTheme(),p.clearPosition(),n.onDisappear&&n.onDisappear(t,e)}function s(t){return!(!t||!t.datum)&&(!t.datum._facetID&&!!t.datum._id)}Object.defineProperty(n,"__esModule",{value:!0});var f=t("d3-selection"),l=t("./options"),h=t("./parseOption"),d=t("./supplementField"),p=t("./tooltipDisplay"),m=void 0,v=!1;n.vega=r,n.vegaLite=i},{"./options":9,"./parseOption":10,"./supplementField":11,"./tooltipDisplay":12,"d3-selection":3}],9:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.DELAY=100},{}],10:[function(t,e,n){"use strict";function r(t,e){if("group"!==t.mark.marktype||"nested_main_group"!==t.mark.name){var n=l.map(t.datum);return a(n,["_id","_prev","width","height","count_start","count_end","layout_start","layout_mid","layout_end","layout_path","layout_x","layout_y"]),c(n,e.fields),s(n,e.fields),f(t.mark.marktype,n),!0===e.showAllFields?u(n,e):i(n,e)}}function i(t,e){var n=[];return e.fields.forEach(function(e){var r=e.title?e.title:e.field,i=o(t,e.field);if(void 0!==i){var u=h.customFormat(i,e.formatType,e.format)||h.autoFormat(i);n.push({title:r,value:u})}}),n}function o(t,e){var n,r=e.split("."),i=r[0];return r.shift(),t.has(i)&&(n=t.get(i),r.forEach(function(t){n[t]&&(n=n[t])})),void 0===n?void console.warn("[Tooltip] Cannot find field "+e+" in data."):n}function u(t,e){var n=[],r=l.map(e.fields,function(t){return t.field});return t.each(function(t,e){var i;i=r.has(e)&&r.get(e).title?r.get(e).title:e;var o,u;r.has(e)&&(o=r.get(e).formatType,u=r.get(e).format);var a=h.customFormat(t,o,u)||h.autoFormat(t);n.push({title:i,value:a})}),n}function a(t,e){e.forEach(function(e){t.remove(e)})}function c(t,e){e&&e.forEach(function(e){e.removeOriginalTemporalField&&a(t,[e.removeOriginalTemporalField])})}function s(t,e){if(e)return e.forEach(function(e){if(!0===e.bin){var n=e.field,r=n.concat("_start"),i=n.concat("_mid"),o=n.concat("_end"),u=t.get(r),c=t.get(o);if(void 0!==u&&void 0!==c){var s=u+"-"+c;t.set(n,s)}var f=[];f.push(r,i,o),a(t,f)}}),t}function f(t,e){if("line"===t||"area"===t){var n=[];e.each(function(t,e){t instanceof Date&&n.push(e)}),a(e,n)}}Object.defineProperty(n,"__esModule",{value:!0});var l=t("d3-collection"),h=t("./formatFieldValue");n.getTooltipData=r,n.prepareCustomFieldsData=i,n.getValue=o,n.prepareAllFieldsData=u,n.removeFields=a,n.removeDuplicateTimeFields=c,n.combineBinFields=s,n.dropFieldsForLineArea=f},{"./formatFieldValue":7,"d3-collection":1}],11:[function(t,e,n){(function(e){"use strict";function r(t,e){var n=[];return!1!==t.showAllFields?a.spec.fieldDefs(e).forEach(function(r){var o=i(t.fields,r),a=u(o,r,e);n.push(a)}):t.fields&&t.fields.forEach(function(t){var r=o(a.spec.fieldDefs(e),t),i=u(t,r,e);n.push(i)}),t.fields=n,t}function i(t,e){if(e&&t&&!(t.length<=0))if(e.aggregate){for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i.field===e.field&&i.aggregate===e.aggregate)return i}for(var o=0,u=t;o<u.length;o++){var i=u[o];if(i.field===e.field&&!i.aggregate)return i}}else for(var a=0,c=t;a<c.length;a++){var i=c[a];if(i.field===e.field)return i}}function o(t,e){if(e&&e.field&&t)for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i.field===e.field){if(!i.aggregate)return i;if(i.aggregate===e.aggregate||!e.aggregate)return i}}}function u(t,e,n){var r=a.util.extend({},n.config);if(!t&&!e)return void console.error("[Tooltip] Cannot supplement a field when field and fieldDef are both empty.");!t&&e&&(t={}),t&&!e&&(e={});var i={};if(i.field=e.field?a.fieldDef.field(e):t.field,e.type===c.TEMPORAL&&e.timeUnit){var o=e.field;i.removeOriginalTemporalField=o;for(var u=a.spec.fieldDefs(n),f=0,l=u;f<l.length;f++){var h=l[f];if(h.field===o&&!h.timeUnit){i.removeOriginalTemporalField=void 0;break}}}if(r.countTitle||(r.countTitle=a.config.defaultConfig.countTitle),i.title=t.title?t.title:a.fieldDef.title(e,r),i.formatType=t.formatType?t.formatType:s[e.type],t.format)i.format=t.format;else switch(i.formatType){case"time":i.format=e.timeUnit?a.timeUnit.formatExpression(e.timeUnit,"",!1).split("'")[1]:r.timeFormat||a.config.defaultConfig.timeFormat;break;case"number":i.format=r.numberFormat}return e.bin&&(i.field=i.field.replace("_start","_range"),i.bin=!0,i.formatType="string"),i}Object.defineProperty(n,"__esModule",{value:!0});var a="undefined"!=typeof window?window.vl:void 0!==e?e.vl:null,c=t("vega-lite/build/src/type"),s={quantitative:"number",temporal:"time",ordinal:void 0,nominal:void 0};n.supplementOptions=r,n.getFieldOption=i,n.getFieldDef=o,n.supplementFieldOption=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"vega-lite/build/src/type":6}],12:[function(t,e,n){"use strict";function r(){return f.select("#vis-tooltip").empty()?f.select("body").append("div").attr("id","vis-tooltip").attr("class","vg-tooltip"):f.select("#vis-tooltip")}function i(t,e){t.selectAll("table").remove();var n=t.append("table").selectAll(".tooltip-row").data(e);n.exit().remove();var r=n.enter().append("tr").attr("class","tooltip-row");r.append("td").attr("class","key").text(function(t){return t.title+":"}),r.append("td").attr("class","value").text(function(t){return t.value})}function o(){f.select("#vis-tooltip").selectAll(".tooltip-row").data([]).exit().remove()}function u(t,e){var n=10,r=10;e&&e.offset&&void 0!==e.offset.x&&null!==e.offset.x&&(n=e.offset.x),e&&e.offset&&void 0!==e.offset.y&&null!==e.offset.y&&(r=e.offset.y),f.select("#vis-tooltip").style("top",function(){var e=this.getBoundingClientRect().height;return t.clientY+e+r<window.innerHeight?t.clientY+r+"px":t.clientY-e-r+"px"}).style("left",function(){var e=this.getBoundingClientRect().width;return t.clientX+e+n<window.innerWidth?t.clientX+n+"px":t.clientX-e-n+"px"})}function a(){f.select("#vis-tooltip").style("top","-9999px").style("left","-9999px")}function c(t){s(),t&&"dark"===t.colorTheme?f.select("#vis-tooltip").classed("dark-theme",!0):f.select("#vis-tooltip").classed("light-theme",!0)}function s(){f.select("#vis-tooltip").classed("dark-theme light-theme",!1)}Object.defineProperty(n,"__esModule",{value:!0});var f=t("d3-selection");n.getTooltipPlaceholder=r,n.bindData=i,n.clearData=o,n.updatePosition=u,n.clearPosition=a,n.updateColorTheme=c,n.clearColorTheme=s},{"d3-selection":3}]},{},[8])(8)});
